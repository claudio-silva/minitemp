/* Copyright 2014 Cláudio Silva */
!function(){function a(a){a=a||{},i(a,p),r=a,s=new RegExp(a.open+"([^\\s\\w}]+)?\\s*([\\s\\S]*?)\\s*"+a.close,"g")}function b(b,c,d){s||a(),c=c||{},h(b,function(a,f){if(a)d(a);else{var g=e(b,f);try{d(null,g(c,r.context,n))}catch(a){d(a)}}})}function c(b,c,f){s||a(),c=c||{};var g=f?e(f,b):d(b);return g(c,r.context,n)}function d(a){for(var b=[],c=[],d=a.replace(s,function(a,b,d){if(d instanceof Function&&(d=d()),d=null==d?"":String(d))switch(b||""){case"":c.push(f(d));break;case"=":c.push("$o.push(e("+d+"));");break;case"==":case"-":c.push("$o.push("+d+");");break;case"#":c.push("");break;default:throw new Error("Unknown template tag "+r.open+b)}return"§§"}),e=d.split(/§§/g),h=0,i=e.length;i>h;++h)b.push("$o.push('"+e[h].replace(/\n/g,"\\n").replace(/'/g,"\\'")+"');"),i-1>h&&c[h]&&b.push(c[h]);return g(b.join("\n"))}function e(a,b){var c=l[a];return c?c:l[a]=d(b)}function f(a){for(var b=0,c=o.length;c>b;++b)a=a.replace(o[b][0],o[b][1]);return a}function g(a){try{return Function("scope","context","API","var $o=[];\nwith (API||{}) with (context||{}) with (scope||{}) {\n"+a+'\n}\nreturn $o.join("")')}catch(b){throw console.log("\nCompiled template:\n"),console.log(a),b}}function h(a,b){if("undefined"!=typeof $)return $.get(a).then(function(a){b(null,a)},function(a){b(a)});if(k){var c=require("fs");c.readFile(a,b)}else{if("undefined"==typeof XMLHttpRequest)throw new Error("No API is available for loading files");var d=new XMLHttpRequest;d.onreadystatechange=function(){4===d.readyState&&(200===d.status?b(null,d.responseText):b(d))},d.open("GET",a,!0),d.send()}}function i(a,b){if(a)for(var c in b)b.hasOwnProperty(c)&&void 0===a[c]&&(a[c]=b[c])}function j(a){var b=1,c=arguments;return"string"==typeof a?a.replace(/\?/g,function(){return c[b++]}):""}var k="undefined"!=typeof process&&"node"==process.title,l={},m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},n={e:function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return m[a]})},ea:function(a){return a.replace(/"/g,"&quot;")},attr:function(a,b,c,d){var e=null!=b&&""!==b?j.apply(null,[b].concat(c)):d||"";return e?a+'="'+n.ea(e)+'"':""},showIf:function(a){return a?"":'style="display:none"'},dynalist:function(a,b){var c=[];for(var d in a)a.hasOwnProperty(d)&&a[d]&&c.push(d);return c.join(void 0===b?" ":"")}},o=[[/for\s*\(\s*(\w+)\s+in\s+(.+?)\)/g,"for (var _$1=0, __$1=$2.length, $1; $1=$2[_$1], _$1<__$1; ++_$1)"]],p={open:"<%",close:"%>",context:{}},q=k?module.exports:window.minitemp={};q.render=b,q.renderString=c,q.config=a,q.API=n,q.macros=o,q.load=h;var r,s}();