/* Copyright 2014 Cláudio Silva */
!function(){function a(a){a=a||{},k(a,r),t=a,u=new RegExp(a.open+"([^\\s\\w}]+)?\\s*([\\s\\S]*?)\\s*"+a.close,"g")}function b(a,b,c){j(a,function(d,e){if(d)c(d);else{var g=f(a,e);try{c(null,g(b||{},t.context,p))}catch(d){c(d)}}})}function c(a,b){return g(a)(b||{})}function d(a,b){var c=n[a];if(!c)throw new Error(l("Template ? not found",a));return c(b||{})}function e(a,b){return n[a]=g(b)}function f(a,b){var c=n[a];return c?c:n[a]=g(b)}function g(a){for(var b=[],c=[],d=a.replace(u,function(a,b,d){if(d instanceof Function&&(d=d()),d=null==d?"":String(d))switch(b||""){case"":c.push(h(d));break;case"=":c.push("$o.push(e("+d+"));");break;case"==":case"-":c.push("$o.push("+d+");");break;case"#":c.push("");break;default:throw new Error("Unknown template tag "+t.open+b)}return"§§"}),e=d.split(/§§/g),f=0,g=e.length;g>f;++f)b.push("$o.push('"+e[f].replace(/\n/g,"\\n").replace(/'/g,"\\'")+"');"),g-1>f&&c[f]&&b.push(c[f]);return i(b.join("\n"))}function h(a){for(var b=0,c=q.length;c>b;++b)a=a.replace(q[b][0],q[b][1]);return a}function i(a){try{var b=Function("scope","context","API","var $o=[];\nwith (API) with (context) with (scope) {\n"+a+'\n}\nreturn $o.join("")');return function(a){return b(a||{},t.context,p)}}catch(c){throw console.log("\nCompiled template:\n"),console.log(a),c}}function j(a,b){if("undefined"!=typeof $)return $.get(a).then(function(a){b(null,a)},function(a){b(a)});if(m){var c=require("fs");c.readFile(a,b)}else{if("undefined"==typeof XMLHttpRequest)throw new Error("No API is available for loading files");var d=new XMLHttpRequest;d.onreadystatechange=function(){4===d.readyState&&(200===d.status?b(null,d.responseText):b(d))},d.open("GET",a,!0),d.send()}}function k(a,b){if(a)for(var c in b)b.hasOwnProperty(c)&&void 0===a[c]&&(a[c]=b[c])}function l(a){var b=1,c=arguments;return"string"==typeof a?a.replace(/\?/g,function(){return c[b++]}):""}var m="undefined"!=typeof process&&"node"==process.title,n={},o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},p={e:function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return o[a]})},ea:function(a){return a.replace(/"/g,"&quot;")},attr:function(a,b,c,d){var e=null!=b&&""!==b?l.apply(null,[b].concat(c)):d||"";return e?a+'="'+p.ea(e)+'"':""},showIf:function(a){return a?"":'style="display:none"'},dynalist:function(a,b){var c=[];for(var d in a)a.hasOwnProperty(d)&&a[d]&&c.push(d);return c.join(void 0===b?" ":"")},sprintf:l},q=[[/for\s*\(\s*(\w+)\s+in\s+(.+?)\)/g,"for (var _$1=0, __$1=$2.length, $1; $1=$2[_$1], _$1<__$1; ++_$1)"]],r={open:"<%",close:"%>",context:{}},s=m?module.exports:window.minitemp={};s.render=c,s.renderFile=b,s.renderTemplate=d,s.precompile=e,s.compile=g,s.config=a,s.API=p,s.macros=q,s.load=j;var t,u;a()}();